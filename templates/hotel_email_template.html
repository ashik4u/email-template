<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hotel Reservation Email</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f9f9f9; }
        .container { background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px #ccc; max-width: 700px; margin: auto; }
        h2 { color: #2a2a2a; }
        .section { margin-bottom: 20px; }
        .btn-row { display: flex; gap: 10px; margin-bottom: 18px; }
        button { padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { opacity: 0.9; }
        #notification-bar { display:none; background:#28a745; color:#fff; padding:8px; border-radius:4px; margin-bottom:10px; text-align:center; font-size:14px; }
    </style>
</head>
<body>
<div class="container">
    <div class="btn-row">
        <button onclick="copyEmailContent()">Copy to Clipboard</button>
        <button onclick="window.location.href='/hotel'">New Request</button>
    </div>
    <div id="notification-bar"></div>
    <div id="email-content">
        <p>Dear Team,<br><br>
        Please confirm the reservations as per the details below.</p>
        <div class="section">
            {% for guest in data.guests %}
                <div style="margin-bottom:24px; padding-bottom:12px; border-bottom:1px dashed #bbb;">
                    <strong>Name:</strong> {{ guest.name }}<br>
                    <strong>Check-In:</strong> {{ guest.checkin }}<br>
                    <strong>Check-Out:</strong> {{ guest.checkout }}<br>
                    <strong>Room type:</strong> {{ guest.room_type }}<br>
                    <strong>Payment mode:</strong> {{ guest.payment_mode }}<br>
                    <strong>Airport Transfer:</strong> {{ guest.airport_transfer }}<br>
                    {% if guest.airport_transfer == 'Required' and guest.airport_info %}
                    <strong>Airport Transfer Note:</strong> {{ guest.airport_info }}<br>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
        <div class="section">
            <p>Please let me know for any further information in this regard.</p>
        </div>
    </div>
</div>
<script>
function showNotification(msg) {
    var bar = document.getElementById('notification-bar');
    bar.innerText = msg;
    bar.style.display = 'block';
    setTimeout(function() { bar.style.display = 'none'; }, 2000);
}
function copyEmailContent() {
    var content = document.getElementById('email-content');
    var range = document.createRange();
    range.selectNode(content);
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    try {
        document.execCommand('copy');
        window.getSelection().removeAllRanges();
        showNotification('Email content copied to clipboard!');
    } catch (err) {
        showNotification('Failed to copy. Please select and copy manually.');
    }
}
</script>
</body>
</html>
