<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Email Template</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f9f9f9; }
        .container { background: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 8px #ccc; max-width: 700px; margin: auto; }
        h2 { color: #2a2a2a; }
        ul { margin: 0; padding-left: 20px; }
        .section { margin-bottom: 20px; }
        .reporting { background: #f1f1f1; padding: 10px; border-radius: 5px; }
        .btn-row { display: flex; gap: 10px; margin-bottom: 18px; }
        button { padding: 8px 16px; background: #007bff; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        button:hover { background: #0056b3; }
        #notification-bar { display:none; background:#28a745; color:#fff; padding:8px; border-radius:4px; margin-bottom:10px; text-align:center; font-size:14px; }
        .two-column { display: flex; gap: 32px; }
        .two-column > div { flex: 1; }
    </style>
</head>
<body>
<div class="container">
    <div class="btn-row">
        <button onclick="copyEmailContent()">Copy to Clipboard</button>
        <button onclick="window.location.href='/'">Create New Request</button>
    </div>
    <div id="notification-bar"></div>
    <div id="email-content">
        <p>Dear Concern,<br>
        <br>
        Please FYI below and send the car and driver details accordingly.</p>
        <div class="section two-column">
            <div>
                <strong>Name:</strong> {{ data.name }}<br>
                <strong>Service dates:</strong> {{ data.service_dates }}<br>
                <strong>Service location:</strong> {{ data.service_location }}<br>
                <strong>No of User (Pax):</strong> {{ data.pax }}<br>
            </div>
            <div>
                <strong>Car Type:</strong> {{ data.car_type }}<br>
                <strong>Project code:</strong> {{ data.project_code }}<br>
            </div>
        </div>
        <div class="section reporting">
            <strong>Service Type, Reporting Time & Location:</strong>
            <ul>
                {% for item in data.reporting_details %}
                <li>{{ item.date }} - {{ item.details }}</li>
                {% endfor %}
            </ul>
        </div>
        <div class="section">
            <p>Please make sure the driver carries log sheets with them. Obtain a signature from the user noting the starting kilometers and do the same when the user releases the car. Please follow all the terms and conditions as per our signed MSA to avoid any discrepancies. Kindly share the following compliance documents while providing the cab and driver details:</p>
            <ul>
                {% for doc in data.compliance_docs %}
                <li>{{ doc }}</li>
                {% endfor %}
            </ul>
            <p>Please let us know for any further queries in this regard.</p>
        </div>
    </div>
</div>
<script>
function showNotification(msg) {
    var bar = document.getElementById('notification-bar');
    bar.innerText = msg;
    bar.style.display = 'block';
    setTimeout(function() { bar.style.display = 'none'; }, 2000);
}
function copyEmailContent() {
    var content = document.getElementById('email-content');
    var range = document.createRange();
    range.selectNode(content);
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    try {
        document.execCommand('copy');
        window.getSelection().removeAllRanges();
        showNotification('Email content copied to clipboard!');
    } catch (err) {
        showNotification('Failed to copy. Please select and copy manually.');
    }
}
</script>
</body>
</html>
